//problem "617E"
//created in 16:50:47 - Tue 06/08/2024

#include<bits/stdc++.h>

#define all(x) x.begin(), x.end()
const int N = 1e5 + 5;

using namespace std;

int n, q, k, sz, m;
int a[N];
vector<int> M[N * 10]; 
vector<pair<int, int>> s[400];

int32_t main() {
    ios_base::sync_with_stdio(false); cin.tie(NULL);
    
    cin >> n >> q >> k;

    sz = sqrt(n);
    m = n / (sz - 1) + 1;

    for(int i = 0; i < n; i++) { 
        cin >> a[i];
        if(i != 0)
            a[i] ^= a[i - 1];
        if(!M[a[i] ^ k].empty()) {
            for(auto j : M[a[i] ^ k]) 
                s[j / sz].push_back({i, j});
        }
        M[a[i]].push_back(i + 1);
    }

    for(int i = 0; i < m; i++) {
        sort(all(s[i]));
    }

    for(int i = 1; i <= q; ++i) {
        int l, r, ans = 0;
        cin >> l >> r;
        l--, r--;

        if(l / sz == r / sz) {
            for(int j = 0; j < s[l / sz].size(); j++) {
                if(s[l / sz][j].first <= r && s[l / sz][j].second >= l) 
                    ans++;
            }
            cout << ans;
            continue;
        }

        for(int j = 0; j < s[l / sz].size(); j++) {
            if(s[l / sz][j].first <= r) {
                if(s[l / sz][j].second >= l) 
                    ans++;
            }
            else 
                break;
        }

        for(int j = 0; j < s[r / sz].size(); j++) {
            if(s[r / sz][j].first <= r) {
                if(s[r / sz][j].second >= l) 
                    ans++;
            }
            else 
                break;
        }

        for(int j = l / sz + 1; j < r / sz; j++) {
            int t = upper_bound(all(s[j]), make_pair(r, 0)) - s[j].begin();
            ans += t;
        }

        cout << ans << '\n';
    }
}

/*
lower_bound(all(s[l / sz]), make_pair(r, 0LL)) - s[l / sz].begin()
*/